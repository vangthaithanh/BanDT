@model List<WebDienThoai.Models.GioHang>
@{
    ViewBag.Title = "Giỏ hàng";
}

<div class="container mt-4">
    <h3>Giỏ hàng</h3>

    @if (!Model.Any())
    {
        <div class="alert alert-info">Giỏ hàng trống. <a href="@Url.Action("Index","Home")">Tiếp tục mua sắm</a></div>
    }
    else
    {
        <table class="table table-bordered align-middle">
            <thead>
                <tr>
                    <th>Ảnh</th>
                    <th>Sản phẩm</th>
                    <th>Đơn giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var it in Model)
                {
                    <tr>
                        <td style="width:100px;">
                            @if (!string.IsNullOrEmpty(it.ANH))
                            {
                                <img src="~/Anh/SanPham/@it.ANH" alt="@it.TENSP" class="img-fluid" />
                            }
                        </td>
                        <td>@it.TENSP</td>
                        <td>@it.DONGIA.ToString("N0") đ</td>
                        <td style="width:200px;">
                            <form method="post" action="@Url.Action("Update", "GioHang")" class="d-flex align-items-center">
                                <input type="hidden" name="masp" value="@it.MASP" />
                                <input type="number" name="soluong" value="@it.SOLUONG" min="0" class="form-control me-2" style="width:100px;" />
                                <button class="btn btn-secondary" type="submit">Cập nhật</button>
                            </form>
                        </td>
                        <td>@it.ThanhTien.ToString("N0") đ</td>
                        <td>
                            <a class="btn btn-danger" href="@Url.Action("Remove","GioHang", new { id = it.MASP })">Xóa</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="d-flex justify-content-between align-items-center">
            <div>
                <a class="btn btn-outline-secondary" href="@Url.Action("Index","Home")">Tiếp tục mua sắm</a>
                <a class="btn btn-outline-danger ms-2" href="@Url.Action("Clear","GioHang")">Xóa tất cả</a>
            </div>
            <div class="text-end">
                <h5>Tổng: <strong>@ViewBag.TongTien.ToString("N0") đ</strong></h5>
                <a class="btn btn-primary mt-2" href="#">Thanh toán</a>
            </div>
        </div>
    }
</div>